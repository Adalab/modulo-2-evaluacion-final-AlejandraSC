{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst request = document.querySelector('.js-inputText');\nconst results = document.querySelector('.results__container');\nconst searchButton = document.querySelector('.js-search__btn');\nsearchButton.addEventListener('click', getData);\nconst deleteButton = document.querySelector('.deleteButton');\ndeleteButton.addEventListener('click', deleteAllFav);\n\nlet series = [];\nlet seriesFav = [];\n\n//LOCAL STORAGE\ngetLocalStorage();\n\nfunction getLocalStorage() {\n  const localfavSeries = localStorage.getItem('favSeries');\n  const localfavSeriesJson = JSON.parse(localfavSeries);\n  if (localfavSeriesJson !== null) {\n    seriesFav = localfavSeriesJson;\n    paintLocalstoreSeries();\n  }\n}\n\nfunction paintLocalstoreSeries() {\n  for (let serie of seriesFav) {\n    const favContainer = document.querySelector('.fav__container');\n    const containerAddedToFav = paintSerie(serie, serie.show.id, favContainer, 'eachSerieFav__container', false, 'resultFavTitle');\n    containerAddedToFav.addEventListener('click', removeFav);\n  }\n}\n\nfunction setLocalStorage(seriesFav) {\n  localStorage.setItem('favSeries', JSON.stringify(seriesFav));\n}\n\n//PAINT RESULT\nfunction getData() {\n  const userValue = request.value;\n  fetch('//api.tvmaze.com/search/shows?q=' + userValue)\n    .then((response) => response.json())\n    .then((data) => {\n      cleanDiv(results);\n      series = data;\n      const favArray = getFavInd();\n      for (let i = 0; i < series.length; i++) {\n        const idSerie = parseInt(series[i].show.id);\n\n        if (favArray.indexOf(idSerie) != -1) {\n          paintSerie(series[i], idSerie, results, 'eachSerie__container', true, 'resultTitle');\n        } else {\n          paintSerie(series[i], idSerie, results, 'eachSerie__container', false, 'resultTitle');\n        }\n      }\n      listenImages();\n    });\n}\n\nfunction paintSerie(serie, index, mainContainer, containerName, isFav, containerTitle) {\n  const tittle = createTitle(serie.show.name, containerTitle);\n  const img = createImg(serie);\n  const divContainer = createDiv(tittle, img, index, containerName, isFav);\n  mainContainer.appendChild(divContainer);\n  return divContainer;\n}\n\nfunction listenImages() {\n  const seriesImg = document.querySelectorAll('.eachSerie__container');\n  for (const serieImg of seriesImg) {\n    serieImg.addEventListener('click', favSeries);\n  }\n}\n\n//INCLUDE OR REMOVE FAV FROM RESULTS\nfunction favSeries(ev) {\n  const serieToInclude = series.find((name) => name.show.id == ev.currentTarget.id);\n  const id = serieToInclude.show.id;\n\n  let favArray = getFavInd();\n\n  if (favArray.indexOf(parseInt(id)) == -1) {\n    seriesFav.push(serieToInclude);\n    ev.currentTarget.classList.add('alreadyFav');\n\n    const favContainer = document.querySelector('.fav__container');\n    const containerAddedToFav = paintSerie(serieToInclude, id, favContainer, 'eachSerieFav__container', false, 'resultFavTitle');\n    containerAddedToFav.addEventListener('click', removeFav);\n    localStorage.removeItem('favSeries');\n    if (seriesFav.length > 0) {\n      setLocalStorage(seriesFav);\n    }\n  } else {\n    removeFavFromResult(ev.currentTarget.id);\n  }\n}\n\nfunction removeFavFromResult(id) {\n  const eachSerieFav__containers = document.querySelectorAll('.eachSerieFav__container');\n  for (const container of eachSerieFav__containers) {\n    if (container.id == id) {\n      container.remove();\n    }\n  }\n\n  let favArray = getFavInd();\n  const serieToRemove = favArray.indexOf(id);\n  seriesFav.splice(serieToRemove, 1);\n  localStorage.removeItem('favSeries');\n  if (seriesFav.length > 0) {\n    setLocalStorage(seriesFav);\n  }\n\n  const eachSerie__containers = document.querySelectorAll('.eachSerie__container');\n  for (const container of eachSerie__containers) {\n    if (container.id == id) {\n      container.classList.remove('alreadyFav');\n    }\n  }\n}\n\n//REMOVE FAV FROM FAV\nfunction removeFav(ev) {\n  ev.currentTarget.remove();\n  let favArray = getFavInd();\n\n  const serieToRemove = favArray.indexOf(parseInt(ev.currentTarget.id));\n  seriesFav.splice(serieToRemove, 1);\n  localStorage.removeItem('favSeries');\n  if (seriesFav.length > 0) {\n    setLocalStorage(seriesFav);\n  }\n\n  const eachSerie__containers = document.querySelectorAll('.eachSerie__container');\n  for (const container of eachSerie__containers) {\n    if (container.id == parseInt(ev.currentTarget.id)) {\n      container.classList.remove('alreadyFav');\n    }\n  }\n}\n\n//DELETE ALL FAVS\nfunction deleteAllFav() {\n  localStorage.removeItem('favSeries');\n  seriesFav = [];\n\n  const favContainer = document.querySelector('.fav__container');\n  cleanDiv(favContainer);\n\n  const eachSerie__containers = document.querySelectorAll('.eachSerie__container');\n  for (const container of eachSerie__containers) {\n    container.classList.remove('alreadyFav');\n  }\n}\n\n//AUX FUNCTION\nfunction getFavInd() {\n  let ind = [];\n  for (let serieFav of seriesFav) {\n    ind.push(parseInt(serieFav.show.id));\n  }\n  return ind;\n}\n\n//MODIFY THE HTML DOM\nfunction createImg(serie) {\n  const resultImg__container = document.createElement('img');\n  resultImg__container.classList.add('resultImg');\n  resultImg__container.classList.add('js-resultImg');\n  if (serie.show.image) {\n    resultImg__container.src = serie.show.image.original;\n  } else {\n    resultImg__container.src = '//via.placeholder.com/210x295/ffffff/666666/?text=' + serie.show.name;\n  }\n  return resultImg__container;\n}\n\nfunction createTitle(title, containerTextTittle) {\n  const resultTitle__paragr = document.createElement('p');\n  resultTitle__paragr.classList.add(containerTextTittle);\n  const resultTitle__content = document.createTextNode(title);\n  resultTitle__paragr.appendChild(resultTitle__content);\n  return resultTitle__paragr;\n}\n\nfunction createDiv(title, img, index, containerName, isFav) {\n  const eachSerie__container = document.createElement('div');\n  eachSerie__container.classList.add(containerName);\n  if (isFav) {\n    eachSerie__container.classList.add('alreadyFav');\n  }\n  eachSerie__container.id = index;\n  eachSerie__container.appendChild(img);\n  eachSerie__container.appendChild(title);\n  return eachSerie__container;\n}\n\nfunction cleanDiv(divToclean) {\n  while (divToclean.firstChild) {\n    divToclean.removeChild(divToclean.firstChild);\n  }\n}\n"]}