{"version":3,"sources":["main.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"main.js","sourcesContent":["'use strict';\n\nconst searchButton = document.querySelector('.js-search__btn');\nconst request = document.querySelector('.js-inputText');\nconst results = document.querySelector('.results__container');\nlet series = [];\nlet seriesFav = [];\nlet indexFavContainers = 0;\n\nfunction getData() {\n  const userValue = request.value;\n  console.log(userValue);\n  fetch('//api.tvmaze.com/search/shows?q=' + userValue)\n    .then((response) => response.json())\n    .then((data) => {\n      cleanDiv();\n      series = data;\n      for (let i = 0; i < series.length; i++) {\n        paintSerie(series[i], i, results, 'eachSerie__container');\n      }\n      listenImages();\n    });\n}\n\nfunction paintSerie(serie, index, container, containerName) {\n  const tittle = createTitle(serie.show.name);\n  const img = createImg(serie);\n  const divContainer = createDiv(tittle, img, index, containerName);\n  container.appendChild(divContainer);\n  return divContainer;\n}\n\nfunction listenImages() {\n  const seriesImg = document.querySelectorAll('.eachSerie__container');\n  for (const serieImg of seriesImg) {\n    serieImg.addEventListener('click', favSeries);\n  }\n}\n\nfunction favSeries(ev) {\n  if (!seriesFav.includes(series[ev.currentTarget.id])) {\n    seriesFav.push(series[ev.currentTarget.id]);\n    const favContainer = document.querySelector('.fav__container');\n    const serieToInclude = series[ev.currentTarget.id];\n    const containerAddedToFav = paintSerie(serieToInclude, indexFavContainers, favContainer, 'eachSerieFav__container');\n    indexFavContainers++;\n    // console.log(containerAddedToFav);\n\n    containerAddedToFav.addEventListener('click', removeFav);\n  }\n  setLocalStorage();\n}\n\nfunction removeFav(ev) {\n  ev.currentTarget.remove();\n  seriesFav.splice(series[ev.currentTarget.id], 1);\n}\n\nfunction setLocalStorage() {\n  localStorage.setItem('favSeries', JSON.stringify(series));\n}\n\nfunction getLocalStorage() {\n  const localfavSeries = localStorage.getItem('favSeries');\n  const localfavSeriesJson = JSON.parse(localfavSeries);\n  if (localfavSeriesJson === null) {\n    getData();\n  } else {\n    favSeries = localfavSeriesJson;\n    paintSerie();\n    listenImages();\n  }\n}\n/*\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n*/\n\nfunction createImg(serie) {\n  const resultImg__container = document.createElement('img');\n  resultImg__container.classList.add('resultImg');\n  resultImg__container.classList.add('js-resultImg');\n  //seleccionamos la imagen, si no existe creamos una con el nombre\n  if (serie.show.image) {\n    resultImg__container.src = serie.show.image.original;\n  } else {\n    resultImg__container.src = '//via.placeholder.com/210x295/ffffff/666666/?text=' + serie.show.name;\n  }\n  return resultImg__container;\n}\n\nfunction createTitle(name) {\n  const resultTitle__paragr = document.createElement('p');\n  resultTitle__paragr.classList.add('resultTitle');\n  const resultTitle__content = document.createTextNode(name);\n  resultTitle__paragr.appendChild(resultTitle__content);\n  return resultTitle__paragr;\n}\n\nfunction createDiv(title, img, index, containerName) {\n  const eachSerie__container = document.createElement('div');\n  eachSerie__container.classList.add(containerName);\n  eachSerie__container.id = index;\n  eachSerie__container.appendChild(img);\n  eachSerie__container.appendChild(title);\n\n  return eachSerie__container;\n}\n\nfunction cleanDiv() {\n  while (results.firstChild) {\n    results.removeChild(results.firstChild);\n  }\n}\n\nsearchButton.addEventListener('click', getData);\n\n//Borrar antes de subir\nsearchButton.click();\n\n//getlocal\n//getLocalStorage();\n"]}